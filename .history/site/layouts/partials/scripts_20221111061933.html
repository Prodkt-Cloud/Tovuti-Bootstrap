
{{ if eq hugo.Environment "production" -}}
  <script src="/docs/{{ .Site.Params.docs_version }}/dist/js/bootstrap.bundle.min.js" {{ printf "integrity=%q" .Site.Params.cdn.js_bundle_hash | safeHTMLAttr }} crossorigin="anonymous"></script>
{{ else -}}
  <script src="/docs/{{ .Site.Params.docs_version }}/dist/js/bootstrap.bundle.js"></script>
{{- end }}

{{ if eq .Page.Layout "docs" -}}
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script src="https://cdn.jsdelivr.net/npm/@stackblitz/sdk@1/bundles/sdk.umd.js"></script>

{{- end }}

{{- $funk := resources.Match "js/funk/*.js" -}}
{{- $vendor := resources.Match "js/vendor/*.js" -}}
{{- $js := resources.Match "js/*.js" -}}
{{- $css := resources.Match "js/*.css" -}}
{{- $targetDocsJSPath := path.Join "/docs" .Site.Params.docs_version "assets/js/docs.js" -}}
{{- $targetFunkJSPath := path.Join "/docs" .Site.Params.docs_version "assets/js/funk.js" -}}
{{- $docsJs := append $js $vendor | resources.Concat $targetDocsJSPath -}}
{{- $funkJs := append $js $funk | resources.Concat $targetFunkJSPath -}}

{{- if eq hugo.Environment "production" -}}
  {{- $docsJs = $docsJs | resources.Minify -}}
{{- end }}

{{- if eq hugo.Environment "production" -}}
  {{- $funkJs = $funkJs | resources.Minify -}}
{{- end }}

<script src="{{ $docsJs.Permalink | relURL }}"></script>
<script src="{{ $funkJs.Permalink | relURL }}"></script>

{{ if eq .Page.Layout "docs" -}}
<script>
  // Open in StackBlitz logic
  document.querySelectorAll('.btn-edit').forEach(btn => {
    btn.addEventListener('click', event => {
      const htmlSnippet = event.target.closest('.bd-code-snippet').querySelector('.bd-example').innerHTML

      // Get extra classes for this example
      const classes = Array.from(event.target.closest('.bd-code-snippet').querySelector('.bd-example').classList).join(' ')

      const jsSnippet = event.target.closest('.bd-code-snippet').querySelector('.btn-edit').getAttribute('data-sb-js-snippet')
      StackBlitzSDK.openBootstrapSnippet(htmlSnippet, jsSnippet, classes)
    })
  })

  StackBlitzSDK.openBootstrapSnippet = (htmlSnippet, jsSnippet, classes) => {
    const markup = `<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="{{ .Site.Params.cdn.css }}" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/{{ .Site.Params.docs_version }}/assets/css/docs.css" rel="stylesheet">
    <title>Bootstrap Example</title>
    <${'script'} src="{{ .Site.Params.cdn.js_bundle }}"></${'script'}>

  </head>
  <body class="p-3 m-0 border-0 ${classes}">

    <!-- Example Code -->
${htmlSnippet.replace(/^/gm, '    ')}
    <!-- End Example Code -->
  </body>
</html>`

    const jsSnippetContent = jsSnippet ? '{{ os.ReadFile "site/assets/js/snippets.js" }}' : null
    const project = {
      files: {
        'index.html': markup,
        'index.js': jsSnippetContent
      },
      title: 'Bootstrap Example',
      description: `Official example from ${window.location.href}`,
      template: jsSnippet ? 'javascript' : 'html',
      tags: ['bootstrap']
    }

    StackBlitzSDK.openProject(project, { openFile: 'index.html' })
  }
</script>

<script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
<script defer src="https://cdn.usefathom.com/script.js" data-site="ITUSEYJG"></script>
<script src="https://kit.fontawesome.com/8c1112f2d0.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
<script>!function(){var e,t,s,i={SM:384,MD:576,LG:768,XL:960};function r(){for(var e,s=new ResizeObserver(function(e){e.forEach(function(s){if(s.target.updateBreakpoints)s.target.updateBreakpoints(s.contentRect.width);else{var r=s.target.dataset.breakpoints?JSON.parse(s.target.dataset.breakpoints):i;0===s.width?s.target.dataset.observing=!1:s.target.dataset.observing=!0,Object.keys(r).forEach(function(e){var t=r[e];s.contentRect.width>=t?s.target.classList.add(e):s.target.classList.remove(e)})}})}),t=document.querySelectorAll("[data-observe-resizes]"),r=0;e=t[r];r++)s.observe(e);function a(){return"object"==typeof Reflect?Reflect.construct(HTMLElement,[],a):HTMLElement.call(this)||this}new MutationObserver(function(e){e.forEach(function(e){var t,a;t=e.addedNodes,a=s.observe.bind(s),t&&[].slice.call(t).forEach(function(e){if(1===e.nodeType){var t=[].slice.call(e.querySelectorAll("[data-observe-resizes]"));e.hasAttribute("data-observe-resizes")&&t.push(e);for(var s,r=0;s=t[r];r++)a(s)}})})}).observe(document.body,{childList:!0,subtree:!0}),a.prototype=Object.create(HTMLElement.prototype,{constructor:{value:a},connectedCallback:{value:function(){var e=this.getAttribute("breakpoints");this.breakpoints=e?JSON.parse(e):i,s.observe(this),this.setAttribute("observing","")}},updateBreakpoints:{value:function(e){for(var t in 0<e?this.setAttribute("observing",""):this.removeAttribute("observing"),this.breakpoints){this.breakpoints[t]<=e?this.classList.add(t):this.classList.remove(t)}}}}),self.customElements.define("responsive-container",a)}"undefined"!=typeof ResizeObserver&&"undefined"!=typeof customElements||!matchMedia("(min-width: "+i.MD+"px)").matches?r():(e="/responsive-components/static/polyfills-9e9c50f1e0.js",t=r,(s=document.createElement("script")).src=e,s.onload=t,document.head.appendChild(s))}()</script>
<script>
  interact('.resizable')
  .resizable({
    edges: { top: true, left: true, bottom: true, right: true },
    listeners: {
      move: function (event) {
        let { x, y } = event.target.dataset

        x = (parseFloat(x) || 0) + event.deltaRect.left
        y = (parseFloat(y) || 0) + event.deltaRect.top

        Object.assign(event.target.style, {
          width: `${event.rect.width}px`,
          height: `${event.rect.height}px`,
          transform: `translate(${x}px, ${y}px)`
        })

        Object.assign(event.target.dataset, { x, y })
      }
    }
  })
</script>
<script>
  // Support Test
const supportsContainerQueries = "container" in document.documentElement.style;

// Conditional Import
if (!supportsContainerQueries) {
  import("https://cdn.skypack.dev/container-query-polyfill");
}
</script>
<script src="https://cdn.jsdelivr.net/npm/container-query-polyfill@1/dist/container-query-polyfill.modern.js"></script>
{{- end }}
